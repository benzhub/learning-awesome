# 最佳實踐

## ✅ 推薦做法

### 1. 定期備份並測試還原

設定排程備份，並定期執行還原測試，確認備份可用。

### 2. 重要變更前建立快照

更新系統、改網路、調資源前先 `qm snapshot`，出問題可快速還原。

### 3. 生產環境使用訂閱源

無訂閱源更新較慢，生產環境建議使用企業訂閱或至少確認無訂閱源狀態。

```bash
# 檢查訂閱狀態
pvesubscription get
```

### 4. 網路分離

存儲、管理、VM 流量分開網段，降低延遲與安全風險。

### 5. 啟用防火牆

資料中心 → Firewall → 依需求設定規則，避免直接暴露管理介面。

---

## ❌ 常見錯誤

### 錯誤 1：ZFS/Ceph 與硬體 RAID 混用

**問題**：ZFS 和 Ceph 需直接控制磁碟，不應透過硬體 RAID。

**修正**：使用 HBA 直通模式（IT mode），或改用 LVM + 硬體 RAID。

### 錯誤 2：單節點 HA 無意義

**問題**：HA 需多節點，單節點故障時無其它節點可接管。

**修正**：至少 3 節點做 HA，並正確設定 Fencing。

### 錯誤 3：連結克隆後刪除基礎映像

**問題**：連結克隆依賴基礎磁碟，刪除會導致克隆無法啟動。

**修正**：刪除前先完整克隆，或保留基礎映像。

### 錯誤 4：未規劃存儲空間

**問題**：local-lvm 用滿會導致 VM 無法寫入、備份失敗。

**修正**：監控存儲使用率，設定告警，必要時擴充或遷移。

### 錯誤 5：root 密碼過於簡單

**問題**：Web 介面預設用 root，弱密碼易被入侵。

**修正**：使用強密碼，建立一般使用者並限制權限，必要時啟用 2FA。

---

## 延伸閱讀

- [Proxmox VE 官方文件](https://pve.proxmox.com/pve-docs/pve-admin-guide.html)
- [PVE 中文手冊](https://pve-doc-cn.readthedocs.io/zh-cn/latest/)
- [Proxmox 社群論壇](https://forum.proxmox.com/)
