# Codebase Indexing 常見模式

## Pattern 1：功能追蹤（從需求到程式碼路徑）
**問題**：你要理解某功能（例如登入、付款）完整實作，但不知道檔案分佈。  
**解法**：先要「路徑圖」，再逐段下鑽。

```text
@Codebase
請幫我建立「使用者註冊」功能路徑圖，依序列出：
1) API 入口
2) 參數驗證
3) 核心邏輯
4) 資料庫操作
5) 回應格式化
每一點都附檔案路徑。
```

---

## Pattern 2：影響面分析（改一處會壞哪裡）
**問題**：準備改動某欄位或函式，怕造成連鎖問題。  
**解法**：用 `@Codebase` 先找所有讀寫位置，再分層分類。

```text
@Codebase
我要把 `user_status` 改為 enum。
請列出所有：
1) 寫入 user_status 的位置
2) 讀取 user_status 的位置
3) 依賴字串比較的邏輯
並標註高風險檔案（可能引發行為變更）。
```

---

## Pattern 3：找可複用實作（避免重造輪子）
**問題**：新需求和舊功能相似，想沿用既有模式。  
**解法**：要求輸出「最像範例 + 為何相似」。

```text
@Codebase
我要做「寄送通知信」功能。
請找出專案內最相似的 2 個實作，並說明：
1) 使用了哪些模組
2) 錯誤處理策略
3) 我可直接複用的程式結構
```

---

## Pattern 4：Bug 逆向定位（從症狀回推來源）
**問題**：你只知道錯誤訊息，不知道是誰拋的。  
**解法**：用錯誤字串 + 業務上下文反查。

```text
@Codebase
線上出現錯誤：`payment token expired`
請幫我回推可能來源：
1) 直接拋出該訊息的位置
2) 間接組合該訊息的位置
3) 可能觸發條件與修復建議
```

下一步：把模式變成穩定輸出品質的習慣 → [04-best-practices.md](04-best-practices.md)
